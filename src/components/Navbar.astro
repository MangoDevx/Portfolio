---
// src/components/Navbar.astro
---
<nav class="sticky top-0 z-50 bg-white dark:bg-[#121212] border-gray-200 dark:border-gray-700 py-2 sm:py-4">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 flex items-center justify-between">
    <ul id="nav-menu" class="hidden sm:flex gap-4 list-none">
      <li><a href="#top-section" class="px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Home</a></li>
      <li><a href="#experience"    class="px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Experience</a></li>
      <li><a href="#skills"        class="px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Skills/Education</a></li>
      <!-- <li><a href="#gallery"       class="px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Gallery</a></li> -->
    </ul>
    <div
      id="theme-toggle"
      class="relative w-16 h-8 bg-gray-200 dark:bg-gray-600 rounded-full p-1 cursor-pointer"
      role="checkbox"
      aria-checked="false"
      tabindex="0"
    >
      <div id="slider-knob" class="absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300"></div>
      <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-1 left-1 w-6 h-6 text-yellow-500 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M7.05 16.95l-1.414 1.414m12.728 0l-1.414-1.414M7.05 7.05L5.636 5.636M12 8a4 4 0 100 8 4 4 0 000-8z"/>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-1 right-1 w-6 h-6 text-gray-400 dark:text-blue-500" fill="currentColor" viewBox="0 0 20 20">
        <path d="M17.293 13.293A8 8 0 116.707 2.707a7 7 0 1010.586 10.586z"/>
      </svg>
    </div>
    <button
      id="nav-toggle"
      class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none"
      aria-label="Toggle navigation"
    >
      <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </div>
  <ul id="nav-menu-mobile" class="sm:hidden hidden flex-col gap-2 p-4 list-none">
    <li><a href="#top-section" class="block px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Home</a></li>
    <li><a href="#experience"    class="block px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Experience</a></li>
    <li><a href="#skills"        class="block px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Skills/Education</a></li>
    <li><a href="#gallery"       class="block px-4 py-2 font-medium text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Gallery</a></li>
  </ul>
  <script type="module">
    const knob         = document.getElementById("slider-knob");
    const toggleTheme  = document.getElementById("theme-toggle");
    const navButton    = document.getElementById("nav-toggle");
    const mobileMenu   = document.getElementById("nav-menu-mobile");
    const root         = document.documentElement;

    function setTheme(isDark) {
      root.classList.toggle("dark", isDark);
      knob.classList.toggle("translate-x-8", isDark);
      localStorage.setItem("theme", isDark ? "dark" : "light");
      toggleTheme.setAttribute("aria-checked", isDark);
    }

    const stored    = localStorage.getItem("theme");
    const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    setTheme(stored ? stored === "dark" : systemDark);

    toggleTheme.addEventListener("click", () =>
      setTheme(!root.classList.contains("dark"))
    );
    navButton.addEventListener("click", () =>
      mobileMenu.classList.toggle("hidden")
    );
  </script>
</nav>
